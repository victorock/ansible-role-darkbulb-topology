<domain type='qemu'>
  <name>leaf01-ios</name>
  <memory unit='MiB'>1024</memory>
  <vcpu placement='auto'>1</vcpu>
  <resource>
    <partition>/darkbulb-ios</partition>
  </resource>
  <os>
    <type arch='x86_64'>hvm</type>
    <boot dev='hd'/>
  </os>
  <cpu mode='host-model' />
  <on_poweroff>destroy</on_poweroff>
  <on_reboot>restart</on_reboot>
  <on_crash>destroy</on_crash>
  <devices>
    <disk type='file' device='disk'>
      <driver name='qemu' type='qcow2'/>
      <source file='{{ darkbulb_topology_pool.path }}/leaf01-ios.img'/>
      <target dev='hda' bus='ide'/>
    </disk>
    <interface type='network'>
      <source network="{{ darkbulb_topology_network.name }}"/>
      <model type='e1000'/>
    </interface>
    <interface type='udp'>
      <source address='127.0.0.1' port='11001'>
        <local address='127.0.0.1' port='21001'/>
      </source>
      <target dev='gig01'/>
      <model type='e1000'/>
    </interface>
    <interface type='udp'>
      <source address='127.0.0.1' port='12001'>
        <local address='127.0.0.1' port='21002'/>
      </source>
      <target dev='gig02'/>
      <model type='e1000'/>
    </interface>
    <interface type='udp'>
      <source address='127.0.0.1' port='22003'>
        <local address='127.0.0.1' port='21003'/>
      </source>
      <target dev='gig03'/>
      <model type='e1000'/>
    </interface>
    <interface type='udp'>
      <source address='127.0.0.1' port='31001'>
        <local address='127.0.0.1' port='21004'/>
      </source>
      <target dev='gig04'/>
      <model type='e1000'/>
    </interface>
    <serial type='pty'>
      <target port='0' />
    </serial>
    <console type='pty'>
      <target type='serial' port='0'/>
    </console>
  </devices>
</domain>
